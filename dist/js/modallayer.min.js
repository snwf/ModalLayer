!function(window){"use strict";function aa(e){var b=0;return function(){return b<e.length?{done:!1,value:e[b++]}:{done:!0}}}var m="function"==typeof Object.defineProperties?Object.defineProperty:function(e,b,c){if(e==Array.prototype||e==Object.prototype)return e;e[b]=c.value;return e};
function ba(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<e.length;++b){var c=e[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ca=ba(this);function D(e,b){if(b)a:{var c=ca;e=e.split(".");for(var d=0;d<e.length-1;d++){var f=e[d];if(!(f in c))break a;c=c[f]}e=e[e.length-1];d=c[e];b=b(d);b!=d&&null!=b&&m(c,e,{configurable:!0,writable:!0,value:b})}}
D("Symbol",function(e){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(f||"")+"_"+d++,f)}function c(f,k){this.a=f;m(this,"description",{configurable:!0,writable:!0,value:k})}if(e)return e;c.prototype.toString=function(){return this.a};var d=0;return b});
D("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ca[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[e]&&m(d.prototype,e,{configurable:!0,writable:!0,value:function(){return da(aa(this))}})}return e});function da(e){e={next:e};e[Symbol.iterator]=function(){return this};return e}
D("Array.from",function(e){return e?e:function(b,c,d){c=null!=c?c:function(h){return h};var f=[],k="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof k){b=k.call(b);for(var g=0;!(k=b.next()).done;)f.push(c.call(d,k.value,g++))}else for(k=b.length,g=0;g<k;g++)f.push(c.call(d,b[g],g));return f}});var ea;
if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={A:!0},ia={};try{ia.__proto__=ha;fa=ia.A;break a}catch(e){}fa=!1}ea=fa?function(e,b){e.__proto__=b;if(e.__proto__!==b)throw new TypeError(e+" is not extensible");return e}:null}var ja=ea;D("Object.setPrototypeOf",function(e){return e||ja});D("Reflect",function(e){return e?e:{}});
var ka="function"==typeof Object.create?Object.create:function(e){function b(){}b.prototype=e;return new b},ma=function(){function e(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if("undefined"!=typeof Reflect&&Reflect.construct){if(e())return Reflect.construct;var b=Reflect.construct;return function(c,d,f){c=b(c,d);f&&Reflect.setPrototypeOf(c,f.prototype);return c}}return function(c,d,f){void 0===f&&(f=c);f=ka(f.prototype||Object.prototype);return Function.prototype.apply.call(c,
f,d)||f}}();D("Reflect.construct",function(){return ma});function na(e,b){e instanceof String&&(e+="");var c=0,d=!1,f={next:function(){if(!d&&c<e.length){var k=c++;return{value:b(k,e[k]),done:!1}}d=!0;return{done:!0,value:void 0}}};f[Symbol.iterator]=function(){return f};return f}D("Array.prototype.keys",function(e){return e?e:function(){return na(this,function(b){return b})}});D("Object.is",function(e){return e?e:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
D("Array.prototype.includes",function(e){return e?e:function(b,c){var d=this;d instanceof String&&(d=String(d));var f=d.length;c=c||0;for(0>c&&(c=Math.max(c+f,0));c<f;c++){var k=d[c];if(k===b||Object.is(k,b))return!0}return!1}});function oa(e,b,c){if(null==e)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return e+""}
D("String.prototype.includes",function(e){return e?e:function(b,c){return-1!==oa(this,b,"includes").indexOf(b,c||0)}});function F(e,b){return Object.prototype.hasOwnProperty.call(e,b)}D("Object.values",function(e){return e?e:function(b){var c=[],d;for(d in b)F(b,d)&&c.push(b[d]);return c}});function G(e){var b="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return b?b.call(e):{next:aa(e)}}
D("Promise",function(e){function b(g){this.c=0;this.i=void 0;this.a=[];var h=this.g();try{g(h.resolve,h.reject)}catch(l){h.reject(l)}}function c(){this.a=null}function d(g){return g instanceof b?g:new b(function(h){h(g)})}if(e)return e;c.prototype.c=function(g){if(null==this.a){this.a=[];var h=this;this.g(function(){h.i()})}this.a.push(g)};var f=ca.setTimeout;c.prototype.g=function(g){f(g,0)};c.prototype.i=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var h=0;h<g.length;++h){var l=
g[h];g[h]=null;try{l()}catch(n){this.h(n)}}}this.a=null};c.prototype.h=function(g){this.g(function(){throw g;})};b.prototype.g=function(){function g(n){return function(p){l||(l=!0,n.call(h,p))}}var h=this,l=!1;return{resolve:g(this.G),reject:g(this.h)}};b.prototype.G=function(g){if(g===this)this.h(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.I(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?this.F(g):this.s(g)}};
b.prototype.F=function(g){var h=void 0;try{h=g.then}catch(l){this.h(l);return}"function"==typeof h?this.K(h,g):this.s(g)};b.prototype.h=function(g){this.u(2,g)};b.prototype.s=function(g){this.u(1,g)};b.prototype.u=function(g,h){if(0!=this.c)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.c);this.c=g;this.i=h;this.D()};b.prototype.D=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)k.c(this.a[g]);this.a=null}};var k=new c;b.prototype.I=function(g){var h=this.g();
g.j(h.resolve,h.reject)};b.prototype.K=function(g,h){var l=this.g();try{g.call(h,l.resolve,l.reject)}catch(n){l.reject(n)}};b.prototype.then=function(g,h){function l(q,r){return"function"==typeof q?function(u){try{n(q(u))}catch(t){p(t)}}:r}var n,p,v=new b(function(q,r){n=q;p=r});this.j(l(g,n),l(h,p));return v};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.j=function(g,h){function l(){switch(n.c){case 1:g(n.i);break;case 2:h(n.i);break;default:throw Error("Unexpected state: "+
n.c);}}var n=this;null==this.a?k.c(l):this.a.push(l)};b.resolve=d;b.reject=function(g){return new b(function(h,l){l(g)})};b.race=function(g){return new b(function(h,l){for(var n=G(g),p=n.next();!p.done;p=n.next())d(p.value).j(h,l)})};b.all=function(g){var h=G(g),l=h.next();return l.done?d([]):new b(function(n,p){function v(u){return function(t){q[u]=t;r--;0==r&&n(q)}}var q=[],r=0;do q.push(void 0),r++,d(l.value).j(v(q.length-1),p),l=h.next();while(!l.done)})};return b});
D("Number.isFinite",function(e){return e?e:function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b}});D("Number.isInteger",function(e){return e?e:function(b){return Number.isFinite(b)?b===Math.floor(b):!1}});D("Object.entries",function(e){return e?e:function(b){var c=[],d;for(d in b)F(b,d)&&c.push([d,b[d]]);return c}});
D("String.prototype.endsWith",function(e){return e?e:function(b,c){var d=oa(this,b,"endsWith");void 0===c&&(c=d.length);c=Math.max(0,Math.min(c|0,d.length));for(var f=b.length;0<f&&0<c;)if(d[--c]!=b[--f])return!1;return 0>=f}});
D("WeakMap",function(e){function b(l){this.a=(h+=Math.random()+1).toString();if(l){l=G(l);for(var n;!(n=l.next()).done;)n=n.value,this.set(n[0],n[1])}}function c(){}function d(l){var n=typeof l;return"object"===n&&null!==l||"function"===n}function f(l){if(!F(l,g)){var n=new c;m(l,g,{value:n})}}function k(l){var n=Object[l];n&&(Object[l]=function(p){if(p instanceof c)return p;Object.isExtensible(p)&&f(p);return n(p)})}if(function(){if(!e||!Object.seal)return!1;try{var l=Object.seal({}),n=Object.seal({}),
p=new e([[l,2],[n,3]]);if(2!=p.get(l)||3!=p.get(n))return!1;p.delete(l);p.set(n,4);return!p.has(l)&&4==p.get(n)}catch(v){return!1}}())return e;var g="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var h=0;b.prototype.set=function(l,n){if(!d(l))throw Error("Invalid WeakMap key");f(l);if(!F(l,g))throw Error("WeakMap key fail: "+l);l[g][this.a]=n;return this};b.prototype.get=function(l){return d(l)&&F(l,g)?l[g][this.a]:void 0};b.prototype.has=function(l){return d(l)&&F(l,
g)&&F(l[g],this.a)};b.prototype.delete=function(l){return d(l)&&F(l,g)&&F(l[g],this.a)?delete l[g][this.a]:!1};return b});
D("Map",function(e){function b(){var h={};return h.f=h.next=h.head=h}function c(h,l){var n=h.a;return da(function(){if(n){for(;n.head!=h.a;)n=n.f;for(;n.next!=n.head;)return n=n.next,{done:!1,value:l(n)};n=null}return{done:!0,value:void 0}})}function d(h,l){var n=l&&typeof l;"object"==n||"function"==n?k.has(l)?n=k.get(l):(n=""+ ++g,k.set(l,n)):n="p_"+l;var p=h.c[n];if(p&&F(h.c,n))for(h=0;h<p.length;h++){var v=p[h];if(l!==l&&v.key!==v.key||l===v.key)return{id:n,list:p,index:h,b:v}}return{id:n,list:p,
index:-1,b:void 0}}function f(h){this.c={};this.a=b();this.size=0;if(h){h=G(h);for(var l;!(l=h.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),l=new e(G([[h,"s"]]));if("s"!=l.get(h)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var n=l.entries(),p=n.next();if(p.done||p.value[0]!=h||"s"!=p.value[1])return!1;p=n.next();return p.done||4!=p.value[0].x||
"t"!=p.value[1]||!n.next().done?!1:!0}catch(v){return!1}}())return e;var k=new WeakMap;f.prototype.set=function(h,l){h=0===h?0:h;var n=d(this,h);n.list||(n.list=this.c[n.id]=[]);n.b?n.b.value=l:(n.b={next:this.a,f:this.a.f,head:this.a,key:h,value:l},n.list.push(n.b),this.a.f.next=n.b,this.a.f=n.b,this.size++);return this};f.prototype.delete=function(h){h=d(this,h);return h.b&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.c[h.id],h.b.f.next=h.b.next,h.b.next.f=h.b.f,h.b.head=null,this.size--,
!0):!1};f.prototype.clear=function(){this.c={};this.a=this.a.f=b();this.size=0};f.prototype.has=function(h){return!!d(this,h).b};f.prototype.get=function(h){return(h=d(this,h).b)&&h.value};f.prototype.entries=function(){return c(this,function(h){return[h.key,h.value]})};f.prototype.keys=function(){return c(this,function(h){return h.key})};f.prototype.values=function(){return c(this,function(h){return h.value})};f.prototype.forEach=function(h,l){for(var n=this.entries(),p;!(p=n.next()).done;)p=p.value,
h.call(l,p[1],p[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var g=0;return f});D("String.prototype.startsWith",function(e){return e?e:function(b,c){var d=oa(this,b,"startsWith"),f=d.length,k=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<k&&c<f;)if(d[c++]!=b[g++])return!1;return g>=k}});
function H(e){var b=Array.isArray(e)?pa(e):void 0;b||(b="undefined"!==typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0);if(!(e=b||qa(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}
function ra(e){"@babel/helpers - typeof";ra="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return ra(e)}function I(e,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(b&&b.prototype,{constructor:{value:e,writable:!0,configurable:!0}});b&&sa(e,b)}
function sa(e,b){sa=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return sa(e,b)}function L(e){var b=ta();return function(){var c=M(e);if(b){var d=M(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);if(!c||"object"!==ra(c)&&"function"!==typeof c){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=this}return c}}
function ta(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.a)return!1;if("function"===typeof Proxy)return!0;try{return Reflect.construct(Date,[],function(){}),!0}catch(e){return!1}}function M(e){M=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return M(e)}
function N(e){var b=Array.isArray(e)?e:void 0;if(!b)if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){b=[];var c=!0,d=!1,f=void 0;try{for(var k=e[Symbol.iterator](),g;!(c=(g=k.next()).done)&&(b.push(g.value),2!==b.length);c=!0);}catch(h){d=!0,f=h}finally{try{if(!c&&null!=k["return"])k["return"]()}finally{if(d)throw f;}}}else b=void 0;if(!(e=b||qa(e,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return e}function qa(e,b){if(e){if("string"===typeof e)return pa(e,b);var c=Object.prototype.toString.call(e).slice(8,-1);"Object"===c&&e.constructor&&(c=e.constructor.name);if("Map"===c||"Set"===c)return Array.from(e);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return pa(e,b)}}function pa(e,b){if(null==b||b>e.length)b=e.length;for(var c=0,d=Array(b);c<b;c++)d[c]=e[c];return d}
function O(e,b){if(!(e instanceof b))throw new TypeError("Cannot call a class as a function");}function ya(e,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(e,d.key,d)}}function P(e,b,c){b&&ya(e.prototype,b);c&&ya(e,c)}function Q(e,b,c){b in e?Object.defineProperty(e,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[b]=c}var S={};Object.defineProperty(S,"clickMask",{enumerable:!0,value:function(){void this.remove()}});
Object.defineProperty(S,"interaction",{enumerable:!0,value:{ok:null,no:null,cancel:function(e){void e.remove()}}});
Object.defineProperty(S,"active",{enumerable:!0,value:function(e){var b;var c=0;var d=this.variable.nodes;e=null!==(b=e)&&void 0!==b?b:window.event;T._instance.forEach(function(k){k.status===T._ENUM.STATUS.SHOW&&c++});if(2<=c){var f=T._assistant.element.maxZIndex();d.container.style.zIndex!=f&&(Object.keys(d).forEach(function(k){d[k].style.zIndex=f+1}),d.container.style.zIndex=parseInt(d.container.style.zIndex)+1)}}});
Object.defineProperty(S,"drag",{enumerable:!0,value:function(e){function b(q){var r;var u=[];q=null!==(r=q)&&void 0!==r?r:window.event;switch(q.code){case "ArrowUp":u[1]=-1;break;case "ArrowDown":u[1]=1;break;case "ArrowLeft":u[0]=-1;break;case "ArrowRight":u[0]=1;break;default:return}q.preventDefault();d(u[0],u[1])}function c(q){var r;q=g=null!==(r=q)&&void 0!==r?r:window.event;d(q.movementX,q.movementY)}function d(q,r){1!==g.buttons?v():(k.option.drag.overflow||(n.x+q<p[0]&&(n.x=p[0]-q),n.right+
q>p[1]&&(n.x=p[1]-n.width-q),n.y+r<p[2]&&(n.y=p[2]-r),n.bottom+r>p[3]&&(n.y=p[3]-n.height-r)),n.x+=q,n.y+=r,k.option.resize.enable&&k.option.content.fullContainer&&(q=[5,p[1]-n.width-5],r=[5,p[3]-n.height-5],n.x<=q[0]?n.x=q[0]:n.x>=q[1]&&(n.x=q[1]),n.y<=r[0]?n.y=r[0]:n.y>=r[1]&&(n.y=r[1])),l.style.marginLeft=n.x+"px",l.style.marginTop=n.y+"px",k.setStatus("drag"))}var f,k=this,g;var h=this.status;e=null!==(f=e)&&void 0!==f?f:window.event;var l=this.variable.nodes.container;var n=l.getBoundingClientRect();
e=window.document.documentElement.getBoundingClientRect();var p=[e.x,e.x+e.width,e.x,e.y+e.height];window.getSelection().empty();var v=function r(){document.removeEventListener("keyup",b,!0);document.removeEventListener("mousemove",c);document.removeEventListener("mouseup",r);k.setStatus(h)};document.addEventListener("mouseup",v);document.addEventListener("mousemove",c);document.addEventListener("keyup",b,!0)}});
Object.defineProperty(S,"resize",{enumerable:!0,value:function(e){function b(q){var r;if(1!==q.buttons)v();else{d.setStatus("resize");q=null!==(r=q)&&void 0!==r?r:window.event;r=q.screenX-l[0];var u=q.screenY-l[1];q=k.getAttribute("position-resize-bar");var t=[g.x,g.y,n[0],n[1]];q.includes("top")&&(t[1]+=u,t[3]-=u,t[1]<p.y&&(t[3]-=p.y-t[1]),t[3]<h[1]&&(t[1]+=t[3]-h[1],t[3]=h[1]));q.includes("bottom")&&(t[3]+=u,t[3]<h[1]&&(t[3]=h[1]));q.includes("left")&&(t[0]+=r,t[2]-=r,t[0]<p.x&&(t[2]-=p.x-t[0]),
t[2]<h[0]&&(t[0]+=t[2]-h[0],t[2]=h[0]));q.includes("right")&&(t[2]+=r,t[2]<h[0]&&(t[2]=h[0]));d.resizeByXYWH(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3]))}}var c,d=this;var f=this.status;e=null!==(c=e)&&void 0!==c?c:window.event;var k=e.target;var g=this.variable.nodes.container.getBoundingClientRect();var h=this.variable.defaultArea;var l=[e.screenX,e.screenY];var n=[g.width,g.height];var p=document.documentElement.getBoundingClientRect();window.getSelection().empty();var v=function r(){document.removeEventListener("mousemove",
b);document.removeEventListener("mouseup",r);d.setStatus(f)};document.addEventListener("mouseup",v);document.addEventListener("mousemove",b)}});Object.defineProperty(S,"minimizeRevert",{enumerable:!0,value:function(){if("1"!=this.getAttribute("clicked")){this.setAttribute("clicked",1);var e=Number(this.getAttribute("modal-layer-index"));delete T._minimizeQueue[T._minimizeQueue.indexOf(T._instance[e])]}}});
Object.defineProperty(S,"autoShutdown",{enumerable:!0,value:function(){var e=this;var b=1E3*this.option.popupTime;var c=setInterval(function(){if(e.variable.nodes.container.classList.contains("modal-layer-show")){if(e.option.progress.enable){var d=e.variable.nodes.container.querySelector(".modal-layer-progress-bar-progress");switch(e.option.progress.position){case "top":case "bottom":var f="widthFull";break;case "left":case "right":f="heightFull"}d.style.animation=f+" "+e.option.popupTime+"s linear forwards"}e.variable.timeout.auto_shutdown=
setTimeout(function(){return void e.remove()},b);window.clearInterval(c)}},10)}});
Object.defineProperty(S,"action",{enumerable:!0,value:{close:function(e){void e.remove()},expand:function(e){var b=e.status;var c=e.X.V.N.querySelector("iframe[name="+e.H.v.name+e.H.index+"]");var d=function(k){k.target===c?e.J(T._ENUM.STATUS.L):!1===k.target&&(window.removeEventListener("fullscreenchange",d),e.J(b))};var f=function(k){T.U({T:!1,W:5,title:"\u9519\u8bef",O:!0,P:"bottom",content:'<i class="fas fa-window-close" style="color: red"></i> \u5168\u5c4f\u5931\u8d25, \u9519\u8bef\u539f\u56e0: '+k});
window.removeEventListener("fullscreenerror",f)};window.addEventListener("fullscreenerror",f);window.addEventListener("fullscreenchange",d);T._assistant.element.S(c)},minimize:function(e){var b=T._minimizeQueue.indexOf(e);0>b?T._minimizeQueue.push(e):T._minimizeQueue.splice(b,1)}}});
Object.defineProperty(S,"imageTools",{enumerable:!0,value:{crop:function(e){e.variable.image.status===T._ENUM.LOAD_STATUS.LOADED&&e.crop()},spin:function(e){e.variable.image.status===T._ENUM.LOAD_STATUS.LOADED&&e.spin()},filter:function(e){e.variable.image.status===T._ENUM.LOAD_STATUS.LOADED&&e.filter(window.event.target)},revert:function(e){e.variable.image.status===T._ENUM.LOAD_STATUS.LOADED&&e.revert()},download:function(e){e.variable.image.status===T._ENUM.LOAD_STATUS.LOADED&&e.download()}}});
var za={src:null,srcdoc:null,frameborder:0,scrolling:"no",area:[800,600],allowfullscreen:!0,name:"modal-layer-page-"},V={image:[],size:{min:[.15625,.160257],max:[.9,.9]},toolbar:{enable:!1,config:{crop:{enable:!1,title:"crop",icon:"fas fa-crop-alt"},spin:{enable:!1,title:"spin",icon:"fas fa-redo-alt"},filter:{enable:!1,config:{blur:{enable:!1,title:"blur",icon:null,text:"\u6a21"},gray:{enable:!1,title:"gray",icon:null,text:"\u7070"},mirror:{enable:!1,title:"mirror",icon:null,text:"\u955c"}},title:"filter",
icon:"fas fa-filter"},revert:{enable:!1,title:"revert",icon:"fas fa-sync-alt"},download:{enable:!1,title:"download",icon:"fas fa-download"}}}},Aa={icon:0,size:48,rate:null,duration:2,area:[48,48],color:"white",background:"transparent",position:["center","center"]},Ba={index:0,ui:"modal-layer-ui",title:null,window:null,popupTime:5,skin:"default",parentModalLayer:null,areaProportion:[.18,.21],content:{value:null,fullContainer:!1},text:{action:{close:"\u5173\u95ed",expand:"\u5168\u5c4f",minimize:"\u6700\u5c0f\u5316"},
interaction:{ok:"\u786e\u5b9a",no:"\u62d2\u7edd",cancel:"\u53d6\u6d88"}},transition:{time:.2,opacity:0,scale:[.45,.45]},mask:{enable:!0,clickRemove:!0},drag:{enable:!0,overflow:!1},resize:{enable:!0},progress:{enable:!1,position:"bottom",color:"deepskyblue",background:"#cecece"},layer:{},hook:{initStart:null,initEnded:null},event:S},X={};Object.defineProperty(X,"mask",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-mask"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"container",{get:function(){return JSON.parse(JSON.stringify({innerHTML:[],nodeType:"div","class":"modal-layer-container"}))},enumerable:!0,configurable:!1});Object.defineProperty(X,"action",{get:function(){return JSON.parse(JSON.stringify({innerHTML:[],nodeType:"div","class":"modal-layer-action"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"action_button",{get:function(){return JSON.parse(JSON.stringify({minimize:{nodeType:"span","data-fa-transform":"up-4 shrink-2","class":"fas fa-window-minimize modal-layer-action-btn modal-layer-action-btn-minimize"},expand:{nodeType:"span","data-fa-transform":"shrink-2","class":"fas fa-expand-arrows-alt modal-layer-action-btn modal-layer-action-btn-expand"},close:{nodeType:"span","data-fa-transform":"rotate-45 grow-1","class":"fas fa-plus modal-layer-action-btn modal-layer-action-btn-close"}}))},
enumerable:!0,configurable:!1});Object.defineProperty(X,"title",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-title",innerHTML:[{nodeType:"h4","class":"modal-layer-title-content"}]}))},enumerable:!0,configurable:!1});Object.defineProperty(X,"content",{get:function(){return JSON.parse(JSON.stringify({innerHTML:[],nodeType:"div","class":"modal-layer-content"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"content_text",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-text-content"}))},enumerable:!0,configurable:!1});Object.defineProperty(X,"content_page",{get:function(){return JSON.parse(JSON.stringify({name:"",frameborder:0,scrolling:"no",nodeType:"iframe","class":"modal-layer-page-content"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"content_image",{get:function(){return JSON.parse(JSON.stringify({"load-status":2,nodeType:"canvas","class":"modal-layer-image-canvas"}))},enumerable:!0,configurable:!1});Object.defineProperty(X,"content_image_hidden",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-image-hidden",style:"width: 0; height: 0; overflow: hidden;"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"content_loading",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-loading-box",innerHTML:[{nodeType:"span","class":"modal-layer-loading-icon"}]}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"content_loading_icon",{get:function(){return JSON.parse(JSON.stringify([{nodeType:"span","class":"modal-layer-loading-icon fas fa-spinner fa-spin fa-fw"},{nodeType:"span","class":"modal-layer-loading-icon fas fa-circle-notch fa-spin fa-fw"},{nodeType:"span","class":"modal-layer-loading-icon fas fa-sync fa-spin fa-fw"},{nodeType:"span","class":"modal-layer-loading-icon fas fa-cog fa-spin fa-fw"}]))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"toolbar",{get:function(){return JSON.parse(JSON.stringify({innerHTML:[],nodeType:"div","class":"modal-layer-toolbar"}))},enumerable:!0,configurable:!1});Object.defineProperty(X,"interaction",{get:function(){return JSON.parse(JSON.stringify({innerHTML:[],nodeType:"div","class":"modal-layer-interaction"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"interaction_button",{get:function(){return JSON.parse(JSON.stringify({ok:{nodeType:"span","class":"modal-layer-interaction-btn modal-layer-interaction-btn-ok"},no:{nodeType:"span","class":"modal-layer-interaction-btn modal-layer-interaction-btn-no"},cancel:{nodeType:"span","class":"modal-layer-interaction-btn modal-layer-interaction-btn-cancel"}}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"progress_bar",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-progress-bar",innerHTML:[{nodeType:"div","class":"modal-layer-progress-bar-background",innerHTML:[{nodeType:"span","class":"modal-layer-progress-bar-progress"}]}]}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"resize_box",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-resize-box",innerHTML:[{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"top"},{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"left"},{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"right"},{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"bottom"},{nodeType:"div","class":"modal-layer-resize-bar",
"position-resize-bar":"left-top"},{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"right-top"},{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"left-bottom"},{nodeType:"div","class":"modal-layer-resize-bar","position-resize-bar":"right-bottom"}]}))},enumerable:!0,configurable:!1});Object.defineProperty(X,"minimize_queue",{get:function(){return JSON.parse(JSON.stringify({innerHTML:[],nodeType:"div",id:"modal-layer-minimize-queue"}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"minimize_queue_item",{get:function(){return JSON.parse(JSON.stringify({nodeType:"div","class":"modal-layer-minimize-queue-item",innerHTML:[{nodeType:"h4","class":"modal-layer-minimize-queue-item-title"}]}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"image_tools",{get:function(){return JSON.parse(JSON.stringify({crop:{title:"crop",nodeType:"div","tool-type":"crop",innerHTML:[{nodeType:"span","class":"modal-layer-toolbar-item-icon"}],"class":"modal-layer-toolbar-item"},spin:{title:"spin",nodeType:"div","tool-type":"spin",innerHTML:[{nodeType:"span","class":"modal-layer-toolbar-item-icon"}],"class":"modal-layer-toolbar-item"},revert:{title:"revert",nodeType:"div","tool-type":"revert",innerHTML:[{nodeType:"span","class":"modal-layer-toolbar-item-icon"}],
"class":"modal-layer-toolbar-item"},filter:{title:"filter",nodeType:"div","tool-type":"filter",innerHTML:[{nodeType:"span","class":"modal-layer-toolbar-item-icon"},{innerHTML:[],nodeType:"div","class":"modal-layer-toolbar-item-child-list"}],"class":"modal-layer-toolbar-item"},download:{title:"save",nodeType:"div","tool-type":"download",innerHTML:[{nodeType:"span","class":"modal-layer-toolbar-item-icon"}],"class":"modal-layer-toolbar-item"}}))},enumerable:!0,configurable:!1});
Object.defineProperty(X,"image_tools_child",{get:function(){return JSON.parse(JSON.stringify({filter:{mirror:{title:"\u955c\u50cf",innerText:"\u955c",nodeType:"span","filter-type":"mirror","class":"modal-layer-toolbar-filter-icon"},blur:{"data-radius":3,"data-sigma":1.5,innerText:"\u6a21",title:"\u9ad8\u65af\u6a21\u7cca",nodeType:"span","filter-type":"blur","class":"modal-layer-toolbar-filter-icon"},gray:{title:"\u7070\u5ea6\u5316",innerText:"\u7070",nodeType:"span","filter-type":"gray","class":"modal-layer-toolbar-filter-icon"}}}))},
enumerable:!0,configurable:!1});var Y={};Object.defineProperty(Y,"ARROW",{enumerable:!0,value:{LEFT:37,UP:38,RIGHT:39,DOWN:40}});Object.defineProperty(Y,"TYPE",{enumerable:!0,value:{MSG:0,MESSAGE:0,ALERT:1,PROMPT:2,CONFIRM:3,PAGE:4,LOADING:5,IMAGE:6,VIDEO:7,AUTDIO:8}});Object.defineProperty(Y,"STATUS",{enumerable:!0,value:{HIDE:0,SHOW:1,EXPAND:2,MINIMIZE:3,REMOVING:4,REMOVED:5,DRAG:6,RESIZE:7}});Object.defineProperty(Y,"LOAD_STATUS",{enumerable:!0,value:{FAILED:0,LOADED:1,LOADING:2}});
var T=function(){function e(b,c){O(this,e);Q(this,"type",null);Q(this,"status",null);Q(this,"option",null);Q(this,"variable",{});try{var d,f,k,g,h,l;null===(d=b.hook)||void 0===d?void 0:null===(f=d.initStart)||void 0===f?void 0:null===(k=f.call)||void 0===k?void 0:k.call(f,b);this.type=b.type;this.status=e._ENUM.STATUS.HIDE;this.compatibleOption(b);this.initOption(b);this.checkOption();this.linkageOption();this.initVariable();this.initStruct();this.initNode();this.initNodeFinally();this.initEvent();
null===(g=this.option.hook)||void 0===g?void 0:null===(h=g.initEnded)||void 0===h?void 0:null===(l=h.call)||void 0===l?void 0:l.call(h,this);this.insertNode()}catch(n){null===c||void 0===c?void 0:c.call(null,n)}}P(e,[{key:"initOption",value:function(b){var c;b.index=e._instance.length;b.window=null!==(c=b.window)&&void 0!==c?c:window.document.body;this.option=e._assistant.object.merge(b,e._option)}},{key:"compatibleOption",value:function(b){var c,d;if("boolean"===typeof b.mask||["true","false"].includes(b.mask))b.mask=
{enable:!!b.mask,clickRemove:!0};if(!b.content||e._assistant.object.isEmpty(b.content.value))b.content={value:b.content,fullContainer:null!==(c=null===(d=b.content)||void 0===d?void 0:d.fullContainer)&&void 0!==c?c:!1}}},{key:"linkageOption",value:function(){0>=this.option.popupTime&&(this.option.progress.enable=!1);!1===this.option.title&&(this.option.drag.enable=!1)}},{key:"checkOption",value:function(){}},{key:"initVariable",value:function(){this.variable.event={};this.variable.timeout={};this.variable.struct=
{_build:{},_backup:{}};this.variable.interval={};this.variable.animationName={}}},{key:"initStruct",value:function(){var b;if(null===(b=this.option.mask)||void 0===b?0:b.enable)this.variable.struct._build.mask=e._struct.mask;this.variable.struct._build.container=e._struct.container}},{key:"initNode",value:function(){this.variable.nodes=e._assistant.element.objectToNode(this.variable.struct._build);var b=this.variable.nodes.container;var c=b.querySelector(".modal-layer-interaction-btn-ok");var d=b.querySelector(".modal-layer-interaction-btn-no");
var f=b.querySelector(".modal-layer-interaction-btn-cancel");b.setAttribute("modal-layer-popup-time",this.option.popupTime);b.setAttribute("content-full-container",Number(this.option.content.fullContainer));b.setAttribute("modal-layer-type",e._assistant.object.getKeyByValue(e._ENUM.TYPE,this.type).toLowerCase());b.setAttribute("allow-drag",Number(this.option.drag.enable));b.setAttribute("allow-resize",Number(this.option.resize.enable));if(this.option.progress.enable){var k=["top","left","right","bottom"];
var g=b.querySelector(".modal-layer-progress-bar");k.includes(this.option.progress.position)||(this.option.progress.position=k[3]);g.setAttribute("progress-bar-position",this.option.progress.position);g.querySelector(".modal-layer-progress-bar-progress").style.cssText+="background: "+this.option.progress.color;g.querySelector(".modal-layer-progress-bar-background").style.cssText+="background: "+this.option.progress.background}if(!1!==this.option.title){var h=b.querySelector(".modal-layer-title-content");
if(this.option.title instanceof Object){var l=e._assistant.element.objectToNode(this.option.title);Object.keys(l).forEach(function(n){h.appendChild(l[n])})}else h.innerHTML=this.option.title}c&&(c.innerText=this.option.text.interaction.ok);d&&(d.innerText=this.option.text.interaction.no);f&&(f.innerText=this.option.text.interaction.cancel)}},{key:"initNodeFinally",value:function(){var b=this.option.ui;var c="modal-layer-skin-"+this.option.skin;var d="modal-layer-index-"+this.option.index;var f="transition-opacity-"+
100*this.option.transition.opacity+"-animation";var k="transition-scale-"+100*this.option.transition.scale[0]+"-"+100*this.option.transition.scale[1]+"-animation";this.variable.animationName.transition_opacity=f;this.variable.animationName.transition_scale=k;if(!e._assistant.css.hasCss(f)){var g={from:"opacity: "+this.option.transition.opacity,to:"opacity: 1"};var h=e._assistant.css.createAnimation(f,g);e._assistant.css.addCss(f,h);e._assistant.css.addCss(f+"-reverse",e._assistant.css.createAnimation(f+
"-reverse",{from:g.o,to:g.from}))}e._assistant.css.hasCss(k)||(f={from:"transform: scale("+this.option.transition.scale[0]+", "+this.option.transition.scale[1]+")",to:"transform: scale(1, 1)"},h=e._assistant.css.createAnimation(k,f),e._assistant.css.addCss(k,h),e._assistant.css.addCss(k+"-reverse",e._assistant.css.createAnimation(k+"-reverse",{from:f.o,to:f.from})));Object.keys(this.variable.nodes).forEach(function(l){for(var n=e._assistant.element.getAllElement(this.variable.nodes[l]),p=0;p<n.length;p++)n[p].classList.add(b);
this.variable.nodes[l].className=b+" "+c+" "+d+" "+this.variable.nodes[l].className.trim()+" modal-layer-hide"},this);e._instance.push(this)}},{key:"initEvent",value:function(){this.option.mask.enable&&this.option.mask.clickRemove&&this.variable.nodes.mask.addEventListener("click",this.variable.event.clickMask=this.option.event.clickMask.bind(this));this.option.drag.enable&&this.variable.nodes.container.querySelector(".modal-layer-title").addEventListener("mousedown",this.variable.event.drag=this.option.event.drag.bind(this));
this.option.resize.enable&&e._assistant.element.eventTarget(this.variable.nodes.container,".modal-layer-resize-bar","mousedown",this.variable.event.resize=this.option.event.resize.bind(this));this.variable.nodes.container.addEventListener("mousedown",this.variable.event.active=this.option.event.active.bind(this));this.option.event.action.close&&e._assistant.element.eventTarget(this.variable.nodes.container,".modal-layer-action-btn-close","click",this.option.event.action.close,this);this.option.event.action.expand&&
e._assistant.element.eventTarget(this.variable.nodes.container,".modal-layer-action-btn-expand","click",this.option.event.action.expand,this);this.option.event.action.minimize&&e._assistant.element.eventTarget(this.variable.nodes.container,".modal-layer-action-btn-minimize","click",this.option.event.action.minimize,this);var b=this.variable.nodes.container.querySelector(".modal-layer-interaction-btn-ok");var c=this.variable.nodes.container.querySelector(".modal-layer-interaction-btn-no");var d=this.variable.nodes.container.querySelector(".modal-layer-interaction-btn-cancel");
this.option.event.interaction.ok&&b&&b.addEventListener("click",this.variable.event.interaction_ok=this.option.event.interaction.ok.bind(b,this));this.option.event.interaction.no&&c&&c.addEventListener("click",this.variable.event.interaction_no=this.option.event.interaction.no.bind(c,this));d&&d.addEventListener("click",this.variable.event.interaction_cancel=this.option.event.interaction.cancel.bind(d,this));e._assistant.element.eventTarget(document,"#modal-layer-minimize-queue .modal-layer-minimize-queue-item",
"click",this.option.event.minimizeRevert)}},{key:"insertNode",value:function(){var b=this;Object.keys(this.variable.nodes).forEach(function(c){var d,f=b.option.window;if(f instanceof String||"string"===typeof f)f=b.option.window=null!==(d=document.querySelector(f))&&void 0!==d?d:window.a.body;f.insertAdjacentElement||(f=b.option.window=window.document.body);f.insertAdjacentElement("beforeend",b.variable.nodes[c])},this)}}]);P(e,[{key:"setStatus",value:function(b){if(Object.values(e._ENUM.STATUS).includes(b))this.status=
b,this.variable.nodes.container.setAttribute("modal-layer-status",e._assistant.object.getKeyByValue(e._ENUM.STATUS,b));else{b=b.toUpperCase();if(void 0===e._ENUM.STATUS[b])throw Error("Illegal value");this.status=e._ENUM.STATUS[b];this.variable.nodes.container.setAttribute("modal-layer-status",b.toLowerCase())}}},{key:"resize",value:function(){var b=window.innerWidth;var c=0;var d=this.variable.nodes.container;var f=d.children;var k=this.option.areaProportion[0].toString().length-(this.option.areaProportion[0].toString().indexOf(".")+
1);k=10*b*k*this.option.areaProportion[0]/(10*k);d.style.width=k+"px";for(b=0;b<f.length;b++)c="absolute"==getComputedStyle(f[b],null).position?c:Math.max(e._assistant.element.getNodeHeight(f[b]),c);d.style.height=c+"px";this.variable.defaultArea=[k,c]}},{key:"resizeByXYWH",value:function(b,c,d,f){var k=this.variable.nodes.container;var g=document.documentElement.getBoundingClientRect();b<g.x&&(b=g.x);b+d>g.right&&(d=g.right-b);c<g.y&&(c=g.y);c+f>g.bottom&&(f=g.bottom-c);k.style.marginLeft=b+"px";
k.style.marginTop=c+"px";k.style.width=d+"px";k.style.height=f+"px";[e._ENUM.TYPE.PAGE,e._ENUM.TYPE.VIDEO,e._ENUM.TYPE.AUDIO].includes(this.type)&&(b=k.querySelector("iframe[name="+this.option.layer.name+this.option.index+"]"),b.style.width=this.option.layer.area[0]+d-this.variable.defaultArea[0]+"px",b.style.height=this.option.layer.area[1]+f-this.variable.defaultArea[1]+"px")}},{key:"show",value:function(){var b=this;var c=this.variable.nodes;var d=e._assistant.element.maxZIndex();if(0===Object.keys(c).length||
this.status===e._ENUM.STATUS.SHOW)return!1;var f=this.variable.animationName.transition_opacity+" "+this.option.transition.time+"s ease forwards";var k=this.variable.animationName.transition_scale+" "+this.option.transition.time+"s ease forwards";Object.keys(c).forEach(function(h){c[h].style.zIndex=d+1});var g=new Promise(function(h){c.container.onanimationend=function(){0<b.option.popupTime&&b.option.event.autoShutdown.call(b);c.container.onanimationend=null;h()}});c.mask&&(c.mask.style.animation=
f);c.container.style.animation=f+", "+k;Object.keys(c).forEach(function(h){c[h].classList.contains("modal-layer-hide")&&c[h].classList.replace("modal-layer-hide","modal-layer-show")},this);this.setStatus("show");return g}},{key:"hide",value:function(){var b=this;var c=this.variable.nodes;if(0===Object.keys(c).length||this.status===e._ENUM.STATUS.HIDE)return!1;Number.isInteger(this.variable.timeout.auto_shutdown)&&window.clearTimeout(this.variable.timeout.auto_shutdown);var d=this.variable.animationName.transition_opacity+
"-reverse "+this.option.transition.time+"s ease forwards";var f=this.variable.animationName.transition_scale+"-reverse "+this.option.transition.time+"s ease forwards";var k=new Promise(function(g){c.container.onanimationend=function(){Object.keys(c).forEach(function(h){c[h].classList.contains("modal-layer-show")&&c[h].classList.replace("modal-layer-show","modal-layer-hide")});b.setStatus("hide");c.container.onanimationend=null;null!==b.option.parentModalLayer&&b.option.parentModalLayer.show();g()}});
c.mask&&(c.mask.style.animation=d);c.container.style.animation=d+", "+f;return k}},{key:"minimize",value:function(){var b=this;if(this.status!==e._ENUM.STATUS.MINIMIZE){var c=.3;var d=document.querySelector("#modal-layer-minimize-queue");d||(d=e._assistant.element.objectToNode([e._struct.minimize_queue])[0],document.body.insertAdjacentElement("beforeend",d));c=.3;var f=this.variable.nodes.container.querySelector(".modal-layer-title-content").innerHTML;var k=e._assistant.element.objectToNode([e._struct.minimize_queue_item])[0];
k.setAttribute("modal-layer-index",this.option.index);k.querySelector(".modal-layer-minimize-queue-item-title").innerHTML=f;d.insertAdjacentElement("beforeend",k);var g=setInterval(function(){k.parentNode&&(k.style.animation="opacity "+c+"s ease forwards, "+b.variable.animationName.minimize_queue_transition_scale+" "+c+"s ease forwards",clearInterval(g))},10);this.hide().then(function(){return void b.setStatus("minimize")})}}},{key:"revert",value:function(){var b=this;var c=document.querySelector("#modal-layer-minimize-queue");
var d=c.querySelector('.modal-layer-minimize-queue-item[modal-layer-index="'+this.option.index+'"]');if([e._ENUM.STATUS.MINIMIZE].includes(this.status)){d.onanimationstart=function(){setTimeout(function(){b.show();d.onanimationstart=null},150)};var f=new Promise(function(k){d.onanimationend=function(){d.remove();0>=e._minimizeQueue.length&&c.remove();k()}});d.style.animation="opacity-reverse 0.3s ease forwards, "+this.variable.animationName.minimize_queue_transition_scale+"-reverse 0.3s ease forwards";
return f}}},{key:"remove",value:function(){var b=this;var c=this.variable.nodes;if(0===Object.keys(c).length||[e._ENUM.STATUS.REMOVING,e._ENUM.STATUS.REMOVED].includes(this.status))return!1;this.status===e._ENUM.STATUS.MINIMIZE&&delete e._minimizeQueue[e._minimizeQueue.indexOf(this)];this.setStatus("removing");this.hide().then(function(){b.removeAllEvent();Object.keys(c).forEach(function(d){c[d].remove()});b.setStatus("removed")})}},{key:"removeAllEvent",value:function(){var b;if(0===Object.keys(b=
this.variable.nodes).length)return!1;var c=b.container.querySelector(".modal-layer-interaction-btn-ok");var d=b.container.querySelector(".modal-layer-interaction-btn-no");var f=b.container.querySelector(".modal-layer-interaction-btn-cancel");this.option.mask.enable&&this.option.mask.clickRemove&&b.mask.removeEventListener("click",this.variable.event.clickMask);this.option.drag.enable&&b.container.querySelector(".modal-layer-title").removeEventListener("mousedown",this.variable.event.drag);this.option.resize.enable&&
b.container.removeEventListener("mousedown",this.variable.event.resize);b.container.removeEventListener("mousedown",this.variable.event.active);b.container.removeEventListener("click",this.option.event.action.close);b.container.removeEventListener("click",this.option.event.action.expand);b.container.removeEventListener("click",this.option.event.action.minimize);c&&c.removeEventListener("click",this.variable.event.interaction_ok);d&&d.removeEventListener("click",this.variable.event.interaction_no);
f&&f.removeEventListener("click",this.variable.event.interaction_cancel);document.removeEventListener("click",this.option.event.minimizeRevert)}}],[{key:"removeAll",value:function(){for(var b=0;b<e._instance.length;b++)e._instance[b].remove()}},{key:"msg",value:function(b,c){e.message(b,c)}},{key:"message",value:function(b,c){"string"===typeof b?b={content:b,type:e._ENUM.TYPE.MESSAGE}:b.type=e._ENUM.TYPE.MESSAGE;b=new e._achieve.message(b,c);b.resize();b.show();return b}},{key:"alert",value:function(b,
c){b.type=e._ENUM.TYPE.ALERT;b=new e._achieve.alert(b,c);b.resize();b.show();return b}},{key:"confirm",value:function(b,c){b.type=e._ENUM.TYPE.CONFIRM;b=new e._achieve.confirm(b,c);b.resize();b.show();return b}},{key:"prompt",value:function(b,c){b.type=e._ENUM.TYPE.PROMPT;b=new e._achieve.prompt(b,c);b.resize();b.show();return b}},{key:"page",value:function(b,c){b.type=e._ENUM.TYPE.PAGE;b=new e._achieve.page(b,c);b.resize();b.show();return b}},{key:"image",value:function(b,c){var d=null;b.type=e._ENUM.TYPE.IMAGE;
d=new e._achieve.image(b,c);d.variable.image.finish["catch"](function(f){return null===c||void 0===c?void 0:c(f)}).then(function(){return d.resize()}).then(function(){return d.show()});return d}},{key:"loading",value:function(b,c){b.type=e._ENUM.TYPE.LOADING;b=new e._achieve.loading(b,c);b.resize();b.show();return b}}]);return e}();Q(T,"_ENUM",Y);Q(T,"_version",1);Q(T,"_struct",X);Q(T,"_option",Ba);Q(T,"_cache",{});Q(T,"_achieve",{});Q(T,"_assistant",{});
Q(T,"_instance",new Proxy([],{set:function(e,b,c){if(c instanceof T||"length"===b)return e[b]=c,!0;throw new TypeError("Must be of type ModalLayer");},deleteProperty:function(){throw Error("Illegal operation");}}));
Q(T,"_minimizeQueue",new Proxy([],{set:function(e,b,c){if(c instanceof T){var d=e.indexOf(c);c.minimize();0>d?e[b]=c:e[d]=c;return!0}return"length"===b?(e[b]=c,!0):!1},deleteProperty:function(e,b){b=parseInt(b);if(Number.isInteger(b)&&e[b]instanceof T){e[b].revert();if(e[b+1])for(;b<e.length-1;b++)e[b]=e[b+1];delete e[e.length-1];e.length--;return!0}}}));
Object.is(window.ModalLayer,T)?(console.log("ModalLayer already exists."),console.log("Already version: "+window.ModalLayer._version.toFixed(1)+". Try to introduce version: "+T._version.toFixed(1))):(Object.preventExtensions(T),Object.defineProperty(window,"ModalLayer",{value:T}));
var Ca=function(){function e(){O(this,e)}P(e,null,[{key:"createAnimation",value:function(b,c){var d="@keyframes "+b+" {";Object.keys(c).forEach(function(f){d+=f+"{"+c[f]+"}"});return d+"}"}},{key:"hasCss",value:function(b){return void 0!==e.cssList[b]}},{key:"addCss",value:function(b,c){e.hasCss(b)||(e.styleNode||(e.styleNode=document.querySelector("style")),e.styleNode||(e.styleNode=document.createElement("style"),document.head.appendChild(e.styleNode)),c=c.trim(),e.cssList[b]=c,e.styleNode.innerHTML+=
e.delimiter+c)}},{key:"delCss",value:function(b){e.cssList[b]&&(b=new RegExp(e.delimiter+e.cssList[b],"g"),e.styleNode.innerHTML=e.styleNode.innerHTML.replace(b,""))}}]);return e}();Q(Ca,"cssList",{});Q(Ca,"delimiter","\n");Q(Ca,"styleNode",null);Object.defineProperty(T._assistant,"css",{value:Ca});
var Da=function(){function e(){O(this,e)}P(e,null,[{key:"getFileBinary",value:function(b){return fetch(b,{mode:"cors",method:"get",cache:"no-cache",redirect:"follow",referrer:"no-referrer",credentials:"same-origin",headers:{"content-type":"text/plain"}})}},{key:"getFileBlob",value:function(b){var c=null;b instanceof Blob?c=Promise.resolve(b):b instanceof Image||b instanceof Element&&"IMAGE"===b.nodeName?c=this.C(b.src).then(function(d){return d.blob()}):"string"===typeof b||b instanceof String?c=
this.C(b).then(function(d){return d.blob()}):c=Promise.reject(!1);return c}},{key:"getImage",value:function(b){var c=null;"string"===typeof b||b instanceof String?c=b:b instanceof Image||b instanceof Element&&"IMAGE"===b.nodeName?c=b.src:b instanceof Blob||b instanceof MediaSource?c=URL.createObjectURL(b):c=!1;return c}},{key:"getImageSize",value:function(b){var c=new Image,d=new Promise(function(f,k){c.onload=function(){f([c.width,c.height])};c.onerror=function(){k(!1)}});c.src=b;return d}}]);return e}();
Object.defineProperty(T._assistant,"file",{value:Da});
var Ea=function(){function e(){O(this,e)}P(e,null,[{key:"get",value:function(b,c){c=Array.isArray(c)?c:c.split(".");for(var d=0;d<c.length&&!e.isEmpty(b);d++)b=b[c[d]];return b}},{key:"set",value:function(b,c,d){c=Array.isArray(c)?c:c.split(".");for(var f=0;f<c.length;b=b[c[f]],f++)f===c.length-1?Object.defineProperty(b,c[f],{value:d,writable:!0,enumerable:!0,configurable:!0}):e.isEmpty(b[c[f]])&&b[c[f]].constructor===Object||(b[c[f]]={})}},{key:"isEmpty",value:function(b){return null===b||void 0===
b}},{key:"isOnlyObject",value:function(b){return b&&b.__proto__.constructor===Object}},{key:"getMethod",value:function(b,c,d){for(;!e.isEmpty(b);){if(Object.is(b.constructor,c))return b[d];b=b.__proto__}return null}},{key:"getKeyByValue",value:function(b,c){b=Object.entries(b);for(var d=0;d<b.length;d++)if(b[d][1]===c)return b[d][0];return null}},{key:"deepCopy",value:function(b){if(e.isEmpty(b))return b;var c=b.constructor();var d=[c];var f=[[Object.keys(b),Object.values(b)]];do{b=d.shift();var k=
f.shift();var g=N(k);k=g[0];var h=g[1];for(var l=0;l<k.length;l++){g=k[l];var n=h[l];e.isOnlyObject(n)||Array.isArray(n)?(b[g]=n.constructor(),f.push([Object.keys(n),Object.values(n)]),d.push(b[g])):b[g]=n}}while(0<f.length);return c}},{key:"merge",value:function(b,c){if(e.isEmpty(b))return c;if(e.isEmpty(c))return b;var d=c.constructor();var f=[d];c=[[[Object.keys(b),Object.values(b)],[Object.keys(c),Object.values(c)]]];do{b=f.shift();var k=c.shift();var g=N(k);var h=N(g[0]);k=h[0];h=h[1];var l=
N(g[1]);g=l[0];var n=l[1];g=g.concat(k).filter(function(t,z,B){return B.indexOf(t)===z});for(var p=0;p<g.length;p++){var v=void 0;var q=[g[p],n[p]];l=q[0];var r=q[1];q=h[k.indexOf(l)];v=e.isEmpty(q);if(e.isOnlyObject(r)||Array.isArray(r)){var u=[];b[l]=r.constructor();u[1]=[Object.keys(r),Object.values(r)];u[0]=v?[[],[]]:[Object.keys(q),Object.values(q)];f.push(b[l]);c.push(u)}else b[l]=v?r:q}}while(0<c.length);return d}}]);return e}();Object.defineProperty(T._assistant,"object",{value:Ea});
var Fa=function(){function e(){O(this,e)}P(e,null,[{key:"isFloat",value:function(b){var c;if(window.isNaN(c=window.parseFloat(b))||Math.floor(c)==c)return!1;if(b.endsWith("%")){if(100<c)return!1}else if(b.endsWith("\u2030")){if(1E3<c)return!1}else return!1;return!0}},{key:"getLegalSize",value:function(b,c){if(!b||!c||b[0]<=c[0]&&b[1]<=c[1])return b;var d=[];var f=b[0]/b[1];var k=1<=c[0]/c[1]?1:0;var g=Number(!k);b[k]>c[k]?(d[k]=c[k],d[g]=0===k?c[k]/f:c[k]*f):d=b;return d}},{key:"intervalJudgment",
value:function(b,c){c=c.replace(/ /g,"").toLowerCase();var d={"(":">",")":"<","[":">=","]":"<="};var f=c[0];var k=c.slice(-1);var g=Object.keys(d);c=c.slice(1,-1).split(",");c[0]=Number(c[0]);c[1]=Number(c[1]);return g.includes(f)||g.includes(k)?(new Function('"use strict"; return '+(b+d[f]+c[0]+"&&"+b+d[k]+c[1])))():!1}},{key:"insideRect",value:function(b,c){var d=c[0];c=c[1];return b[0]<d[0]||b[1]<d[1]||b[0]>c[0]||b[1]>c[1]?!1:!0}}]);return e}();Object.defineProperty(T._assistant,"number",{value:Fa});
var Ga=function(){function e(){O(this,e)}P(e,null,[{key:"str_replace",value:function(){}},{key:"colorConvert",value:function(b){b=b.toLowerCase();var c=Error("Not a legal color.");if(0===b.indexOf("#")){var d="rgba(";b=b.substring(1);3===b.length&&(b=b.split("").reduce(function(k,g){return k+g+g},""));if(6===b.length)for(c=0;3>c;c++)d+=Number("0x"+b[2*c]+b[2*c+1])+", ";else throw c;d+="255)"}else if(0===b.indexOf("rgb")){d="#";b=b.replace(/(rgb\(|rgba\(|\)| )/g,"").split(",");for(var f=0;3>f;f++)c=
Number(b[f]).toString(16),d+=1===c.length?c+c:c}else throw c;return d}}]);return e}();Object.defineProperty(T._assistant,"string",{value:Ga});
var Ha=function(){function e(){O(this,e)}P(e,null,[{key:"isOverflow",value:function(b,c){b=b.getBoundingClientRect();c=c.getBoundingClientRect();return b.x<c.x||b.x+b.width>c.x+c.width||b.y<c.y||b.y+b.height>c.y+c.height?!0:!1}},{key:"getAllElement",value:function(b){var c=[];b=b.children;if(0!==b.length)for(var d=0;d<b.length;d++)c.push(b[d]),c=c.concat(e.getAllElement(b[d]));return c}},{key:"getNodeHeight",value:function(b){return b.offsetTop+b.offsetHeight+parseInt(getComputedStyle(b,null).marginBottom)}},
{key:"getBeforeElementHeight",value:function(b){var c;for(c=0;(b=b.previousElementSibling)&&!["absolute","fixed"].includes(getComputedStyle(b,null).position);)c+=b.offsetHeight;return c}},{key:"getNodeOriginalSize",value:function(b){var c=[0,0];e.getAllElement(b).forEach(function(d){"absolute"!=getComputedStyle(d,null).position&&(c[0]=d.offsetWidth>c[0]?d.offsetWidth:c[0],d.parentNode===b&&(c[1]+=d.offsetHeight))});return c}},{key:"maxZIndex",value:function(){var b=Array.from(document.all);return parseInt(b.reduce(function(c,
d){d=getComputedStyle(d,null).zIndex;return Math.max(c,isNaN(d)?0:d)},0))}},{key:"eventTarget",value:function(b,c,d,f){var k=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0,g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;Array.isArray(k)||(k=[k]);b.addEventListener(d,function(h){if(h.target===b||h.target.contains(b))return!1;var l=Array.from(b.querySelectorAll(c));if(-1!==l.indexOf(h.target))f.apply(h.target,k);else for(h=h.target.parentNode;h&&h!==b;)if(-1!==l.indexOf(h)){f.apply(h,
k);break}else h=h.parentNode},g)}},{key:"objectToNode",value:function(b){var c={},d;for(d in b){var f=document.createElement(b[d].nodeType);if("undefined"!=typeof b[d].nodeType){for(var k in b[d])if("nodeType"!=k)if("innerhtml"==k.toLocaleLowerCase()){var g=e.objectToNode(b[d][k]),h;for(h in g)f.insertAdjacentElement("beforeend",g[h])}else"innertext"==k.toLocaleLowerCase()?f.insertAdjacentText("beforeend",b[d][k]):f.setAttribute(k,b[d][k]);c[d]=f}}return c}},{key:"launchFullscreen",value:function(b){return b.requestFullscreen(1<
arguments.length&&void 0!==arguments[1]?arguments[1]:{navigationUI:"show"})}},{key:"exitFullscreen",value:function(){document.exitFullscreen()}},{key:"getFullscreenNode",value:function(){return document.fullscreenElement}}]);return e}();Object.defineProperty(T._assistant,"element",{value:Ha});var Ja=function Ia(){O(this,Ia)};
Q(Ja,"gaussian",{sigma:0,cache:{},setSigma:function(e){this.sigma!=e&&(this.sigma=e,this.cache.sigmaSquare=e*e,this.cache["const"]=[1/(e*Math.sqrt(2*Math.PI)),1/(2*Math.PI*this.cache.sigmaSquare)])},getDistribution:function(e,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;b!=this.sigma&&this.setSigma(b);switch(c){case 1:var d=Math.exp(-(e*e)/(2*this.cache.sigmaSquare));break;case 2:d=Math.exp(-(Math.pow(e[0],2)+Math.pow(e[1],2))/(2*this.cache.sigmaSquare))}return this.cache["const"][c-
1]*d}});Object.defineProperty(T._assistant,"formula",{value:Ja});
var Ka=function(){function e(){O(this,e)}P(e,null,[{key:"download",value:function(b){var c,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"canvas",f=b.toDataURL(2<arguments.length?arguments[2]:void 0);e.a=null!==(c=e.a)&&void 0!==c?c:document.createElement("a");e.a.href=f;e.a.download=d;e.a.click()}},{key:"drawDashRound",value:function(b,c,d,f){var k=5/180*Math.PI*2;for(var g=0,h=k/2;360>=h;g+=k,h+=k)b.beginPath(),b.arc(c,d,f,g,h),b.stroke()}}]);return e}();Q(Ka,"downloadNode",document.createElement("a"));
Object.defineProperty(T._assistant,"canvas",{value:Ka});var La=function(){function e(){O(this,e)}P(e,null,[{key:"functionMeasure",value:function(b,c){performance.mark("function-start");b.apply(null,c);performance.mark("function-ended");performance.measure("function","function-start","function-ended");b=performance.getEntriesByName("function");performance.clearMarks();performance.clearMeasures();return b[0]}}]);return e}();Object.defineProperty(T._assistant,"performance",{value:La});
var Ma=function(){function e(){O(this,e)}P(e,null,[{key:"getImagedata",value:function(b){if(b instanceof Image){var c=document.createElement("canvas");var d=c.getContext("2d");d.drawImage(b,0,0);b=d.getImageData(0,0,c.width,c.height)}else if(!(b instanceof ImageData))throw Error("can not parse image");return b}},{key:"grayscale",value:function(b){try{var c=e.getImagedata(b);var d=c.width*c.height*4;var f=new Uint8ClampedArray(c.data.length);for(b=0;b<d;b+=4){var k=c.data[b];var g=c.data[b+1];var h=
c.data[b+2];var l=c.data[b+3];var n=.299*k+.587*g+.114*h;f[b]=n;f[b+1]=n;f[b+2]=n;f[b+3]=l}}catch(p){throw p;}return new ImageData(f,c.width,c.height)}},{key:"gaussianBlur",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,f,k,g,h,l;try{var n=e.getImagedata(b);var p=n.width;var v=n.height;var q=0;if(e.__gaussianMask[c]){var r=e.__gaussianMask[c];q=r.reduce(function(x,J){return x+J},0)}else for(r=[],l=-c;l<=c;l++){var u=
Ja.gaussian.getDistribution(l,d,1);r.push(u);q+=u}for(d=0;d<r.length;d++)r[d]/=q;var t=new Uint8ClampedArray(n.data.length);for(h=0;h<v;h++)for(g=0;g<p;g++){var z=f=k=q=0;var B=4*(h*p+g);for(d=-c;d<=c;d++){var K=g+d;l=d+c;if(0<=K&&K<p){var w=4*(h*p+K);z+=n.data[w]*r[l];f+=n.data[w+1]*r[l];k+=n.data[w+2]*r[l];q+=r[l]}}t[B]=z/q;t[B+1]=f/q;t[B+2]=k/q;t[B+3]=n.data[B+3]}for(g=0;g<p;g++)for(h=0;h<v;h++){z=f=k=q=0;B=4*(h*p+g);for(n=-c;n<=c;n++)K=h+n,l=n+c,0<=K&&K<v&&(w=4*(K*p+g),z+=t[w]*r[l],f+=t[w+1]*
r[l],k+=t[w+2]*r[l],q+=r[l]);t[B]=z/q;t[B+1]=f/q;t[B+2]=k/q}}catch(x){throw x;}return new ImageData(t,p,v)}},{key:"mirror",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,d,f;try{var k=e.getImagedata(b);var g=k.width;var h=k.height;var l=new Uint8ClampedArray(k.data.length);for(f=0;f<h;f++)for(d=0;d<g;d++){var n=4*(f*g+d);if(0==c)var p=4*(f*g+g-d);else if(1==c)p=4*((h-f)*g+d);else throw Error("not give axle");l[n]=k.data[p];l[n+1]=k.data[p+1];l[n+2]=k.data[p+2];l[n+
3]=k.data[p+3];l[p]=k.data[n];l[p+1]=k.data[n+1];l[p+2]=k.data[n+2];l[p+3]=k.data[n+3]}}catch(v){throw v;}return new ImageData(l,g,h)}}]);return e}();Q(Ma,"__gaussianMask",{});Object.defineProperty(T._assistant,"canvasFilter",{value:Ma});
var Na=function(){function e(){O(this,e)}P(e,null,[{key:"fade",value:function(b){var c,d,f,k,g,h,l,n,p=this,v;if(void 0===this.cache.l||null===this.cache.l)this.cache.l=new Map;var q=v=0;var r="animation-fade-"+Date.now()+"-"+performance.now()+(b.sign?"-"+b.sign:"");var u=b.canvas;var t=[u.width/2,u.height/2];var z=u.getContext("2d");b["char"]=null!==(c=b["char"])&&void 0!==c?c:"!?";b.size=b.size?Array.isArray(b.size)?b.size:[b.size]:t[1];b.color=b.color?Array.isArray(b.color)?b.color:[b.color]:["rgba(220, 53, 69"];
b.speed=b.speed?Array.isArray(b.speed)?b.speed:[b.speed]:[250];b.family=b.family?Array.isArray(b.family)?b.family:[b.family]:["Microsoft YaHei"];b.color.map(function(J){if(0===J.indexOf("rgba"))return J.substring(0,J.lastIndexOf(","));if(0===J.indexOf("rgb"))return"rgba"+J.substring(3,J.lastIndexOf(","))});var B=null!==(d=this.cache.l.get(JSON.stringify(b)))&&void 0!==d?d:[];var K=B.length?!0:!1;var w={direction:1,text:null!==(f=b.text)&&void 0!==f?f:"",opacity:{value:0,max:1E3},size:{value:b.size,
index:0},"char":{value:b["char"],index:0},color:{value:b.color,index:0},speed:{value:b.speed,index:0},family:{value:b.family,index:0},round:{x:null!==(k=b.round.x)&&void 0!==k?k:t[0],y:null!==(g=b.round.y)&&void 0!==g?g:t[1]-20,m:null!==(h=b.round.m)&&void 0!==h?h:48,color:null!==(l=b.round.color)&&void 0!==l?l:"#ddd",lineWidth:null!==(n=b.round.lineWidth)&&void 0!==n?n:5},B:function(){z.save();z.textAlign="center";z.textBaseline="middle";z.lineWidth=this.round.lineWidth;z.strokeStyle=this.round.color;
T.M.canvas.R(z,this.round.x,this.round.y,this.round.m);z.font="bold "+this.size.value[this.size.index]+"px "+this.family.value[this.family.index];z.fillStyle=this.color.value[this.color.index]+", "+this.opacity.value/this.opacity.max+")";z.fillText(this["char"].value[this["char"].index],t[0],t[1]-10);z.font="bold 16px "+this.family.value[this.family.index];z.fillStyle=this.color.value[this.color.index]+")";z.fillText(this.text,t[0],t[1]+55);z.restore()}};var x=function(J){if(K)z.putImageData(B[q++],
0,0),q=q>=B.length?0:q;else{w.speed.index=0;var U=(J-v)/1E3;for(var R;w.speed.index<w.speed.value.length-1&&!(R=1/w.speed.value.length,U>=R*w.speed.index&&U<R*(w.speed.index+1));w.speed.index++);w.opacity.value+=w.speed.value[w.speed.index]*w.direction;if(w.opacity.value>=w.opacity.max||0>=w.opacity.value)w.direction=-w.direction;0>w.opacity.value&&(w.opacity.value=0);0==w.opacity.value&&(v=J,++w.size.index===w.size.value.length&&(w.size.index=0),++w.color.index===w.color.value.length&&(w.color.index=
0),++w.family.index===w.family.value.length&&(w.family.index=0),++w["char"].index===w["char"].value.length&&(K=!0,w["char"].index=0,p.cache.l.set(JSON.stringify(b),B)));z.clearRect(0,0,u.width,u.height);w.B();B.push(z.getImageData(0,0,u.width,u.height))}u&&0!==Number(u.getAttribute(r))?window.requestAnimationFrame(x):u.removeAttribute(r)};u.setAttribute(r,1)||x();return r}}]);return e}();Q(Na,"cache",{});Object.defineProperty(T._assistant,"canvasAnimation",{value:Na});
var Oa=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initOption",value:function(d){var f;d.index=T._instance.length;d.window=null!==(f=d.window)&&void 0!==f?f:document.body;this.option=T._assistant.object.merge(d,T._option);this.option.layer=T._assistant.object.merge(this.option.layer,za)}},{key:"linkageOption",value:function(){T._assistant.object.getMethod(this,T,"linkageOption").call(this);null!==this.option.layer.src&&null!==this.option.layer.srcdoc&&
(this.option.layer.srcdoc=null)}},{key:"initStruct",value:function(){T._assistant.object.getMethod(this,T,"initStruct").call(this);var d=this.variable.struct._build.container;var f=this.variable.struct._backup.title=T._struct.title;var k=this.variable.struct._backup.action=T._struct.action;var g=this.variable.struct._backup.content=T._struct.content;var h=this.variable.struct._backup.content_page=T._struct.content_page;var l=this.variable.struct._backup.action_button=T._struct.action_button;k.innerHTML.push(l.minimize,
l.expand,l.close);f.innerHTML.push(k);!1!==this.option.title&&d.innerHTML.push(f);g.innerHTML.push(h);d.innerHTML.push(g);this.option.resize.enable&&(h=this.variable.struct._backup.resize_box=T._struct.resize_box,d.innerHTML.push(h));this.option.progress.enable&&(h=this.variable.struct._backup.progress_bar=T._struct.progress_bar,d.innerHTML.push(h))}},{key:"initNode",value:function(){var d=this;T._assistant.object.getMethod(this,T,"initNode").call(this);var f=this.variable.nodes.container.querySelector(".modal-layer-page-content");
var k="display: block; width: "+this.option.layer.area[0]+"px; height: "+this.option.layer.area[1]+"px";Object.keys(this.option.layer).forEach(function(h){T._assistant.object.isEmpty(d.option.layer[h])||("name"===h?f.setAttribute("name",d.option.layer.name+d.option.index):f.setAttribute(h,d.option.layer[h]))});f.style=k;this.variable.animationName.minimize_queue_transition_scale="transition-scale-50-50-animation";if(!T._assistant.css.hasCss("transition-scale-50-50-animation")){var g={from:"transform: scale(0.5, 0.5)",
to:"transform: scale(1, 1)"};k=T._assistant.css.createAnimation("transition-scale-50-50-animation",g);T._assistant.css.addCss("transition-scale-50-50-animation",k);T._assistant.css.addCss("transition-scale-50-50-animation-reverse",T._assistant.css.createAnimation("transition-scale-50-50-animation-reverse",{from:g.o,o:g.from}))}}},{key:"resize",value:function(){var d=0;var f=this.variable.nodes.container;var k=f.children;var g=f.querySelector("iframe[name="+this.option.layer.name+this.option.index+
"]");g=g.offsetWidth+2*g.parentNode.offsetLeft;for(var h=0;h<k.length;h++)d="absolute"==getComputedStyle(k[h],null).position?d:Math.max(T._assistant.element.getNodeHeight(k[h]),d);f.style.width=g+"px";f.style.height=d+"px";this.variable.defaultArea=[g,d]}}]);return b}(T);Object.defineProperty(T._achieve,"page",{value:Oa});
var Z=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initStruct",value:function(){T._assistant.object.getMethod(this,T,"initStruct").call(this);var d=this.variable.struct._build.container;var f=this.variable.struct._backup.title=T._struct.title;var k=this.variable.struct._backup.action=T._struct.action;var g=this.variable.struct._backup.content=T._struct.content;var h=this.variable.struct._backup.interaction=T._struct.interaction;var l=this.variable.struct._backup.action_button=
T._struct.action_button;var n=this.variable.struct._backup.interaction_button=T._struct.interaction_button;k.innerHTML.push(l.close);f.innerHTML.push(k);!1!==this.option.title&&d.innerHTML.push(f);d.innerHTML.push(g);this.option.resize.enable&&(k=this.variable.struct._backup.resize_box=T._struct.resize_box,d.innerHTML.push(k));this.option.progress.enable&&(k=this.variable.struct._backup.progress_bar=T._struct.progress_bar,d.innerHTML.push(k));h.innerHTML.push(n.ok);d.innerHTML.push(h)}},{key:"initNode",
value:function(){T._assistant.object.getMethod(this,T,"initNode").call(this);var d=this.variable.nodes.container.querySelector(".modal-layer-content");if(Array.isArray(this.option.content.value)){var f=T._assistant.element.objectToNode(this.option.content.value);Object.keys(f).forEach(function(k){d.appendChild(f[k])})}else d.innerHTML=this.option.content.value}}]);return b}(T);Object.defineProperty(T._achieve,"alert",{value:Z});
var Qa=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initOption",value:function(d){var f=this,k;T._assistant.object.getMethod(this,T,"initOption").call(this,d);this.option.layer=T._assistant.object.merge(this.option.layer,V);var g=[window.innerWidth,window.innerHeight];Object.values(this.option.layer.size).forEach(function(h){h.forEach(function(l,n){if((""+l).endsWith("%"))k=100;else if((""+l).endsWith("\u2030"))k=1E3;else if((""+l).includes("0."))k=
1;else return l;h[n]=g[n]*window.parseFloat(l)/k})});this.option.layer.size.min[0]>this.option.layer.size.max[0]&&(this.option.layer.size.min[0]=this.option.layer.size.max[0]);this.option.layer.size.min[1]>this.option.layer.size.max[1]&&(this.option.layer.size.min[1]=this.option.layer.size.max[1]);Object.keys(this.option.layer.toolbar.config).forEach(function(h,l){l=f.option.layer.toolbar.config[h];"boolean"==typeof l&&(f.option.layer.toolbar.config[h]={enable:l,title:V.toolbar.config[h].title,icon:V.toolbar.config[h].icon});
T._assistant.object.isOnlyObject(l.config)?Object.keys(l.config).forEach(function(n,p){p=l.config[n];"boolean"==typeof p&&(f.option.layer.toolbar.config[h].config[n]={enable:p,title:V.toolbar.config[h].config[n].title,icon:V.toolbar.config[h].config[n].icon})}):V.toolbar.config[h].config&&(f.option.layer.toolbar.config[h].config=JSON.parse(JSON.stringify(V.toolbar.config[h].config)))})}},{key:"compatibleOption",value:function(d){var f,k;T._assistant.object.getMethod(this,T,"compatibleOption").call(this,
d);Array.isArray(T._assistant.object.get(d,"layer.image"))||(d.v.image=[d.v.image]);var g=null!==(f=T._assistant.object.get(d,"layer.toolbar.config"))&&void 0!==f?f:[];Object.keys(g).forEach(function(l){g[l]="boolean"===typeof g[l]?{enable:g[l]}:g[l]});var h=null!==(k=T._assistant.object.get(d,"layer.toolbar.config.filter.config"))&&void 0!==k?k:[];Object.keys(h).forEach(function(l){h[l]="boolean"===typeof h[l]?{enable:h[l]}:h[l]})}},{key:"linkageOption",value:function(){var d;T._assistant.object.getMethod(this,
T,"linkageOption").call(this);var f=d=!1;var k=Object.entries(this.option.layer.toolbar.config);var g=Object.entries(this.option.layer.toolbar.config.filter.config);for(var h=0;h<g.length;h++)if(!0===g[h][1].enable){d=!0;break}this.option.layer.toolbar.config.filter.enable=d;for(d=0;d<k.length;d++)if(!0===k[d][1].enable){f=!0;break}this.option.layer.toolbar.enable=f}},{key:"checkOption",value:function(){T._assistant.object.getMethod(this,T,"checkOption").call(this);if(T._assistant.object.isEmpty(this.option.layer.image))throw Error("layer.image can not be empty!");
if(window.isNaN(parseInt(this.option.layer.size.min[0]))||window.isNaN(parseInt(this.option.layer.size.min[1]))||window.isNaN(parseInt(this.option.layer.size.max[0]))||window.isNaN(parseInt(this.option.layer.size.max[1])))throw Error("layer.size does not meet expectations.");}},{key:"initVariable",value:function(){T._assistant.object.getMethod(this,T,"initVariable").call(this);this.variable.image={spin:{total:0,angle:90,backup:null},"default":{size:null,imageData:null},reload:0,link:null,history:[],
finish:null,status:T._ENUM.LOAD_STATUS.LOADING}}},{key:"initStruct",value:function(){var d=this;T._assistant.object.getMethod(this,T,"initStruct").call(this);var f=this.variable.struct._build.container;var k=this.variable.struct._backup.title=T._struct.title;var g=this.variable.struct._backup.action=T._struct.action;var h=this.variable.struct._backup.toolbar=T._struct.toolbar;var l=this.variable.struct._backup.tools=T._struct.image_tools;var n=this.variable.struct._backup.content=T._struct.content;
var p=this.variable.struct._backup.action_button=T._struct.action_button;var v=this.variable.struct._backup.content_image=T._struct.content_image;var q=this.variable.struct._backup.image_tools_child=T._struct.image_tools_child;var r=this.variable.struct._backup.content_image_hidden=T._struct.content_image_hidden;g.innerHTML.push(p.close);k.innerHTML.push(g);!1!==this.option.title&&f.innerHTML.push(k);Object.keys(this.option.layer.toolbar.config).forEach(function(u){d.option.layer.toolbar.config[u].enable&&
h.innerHTML.push(l[u]);d.option.layer.toolbar.config[u].config instanceof Object&&d.option.layer.toolbar.config[u].enable&&Object.keys(d.option.layer.toolbar.config[u].config).forEach(function(t){l[u].innerHTML[1].innerHTML.push(q[u][t])})});this.option.layer.toolbar.enable&&f.innerHTML.push(h);n.innerHTML.push(v);n.innerHTML.push(r);f.innerHTML.push(n);this.option.resize.enable&&(g=this.variable.struct._backup.resize_box=T._struct.resize_box,f.innerHTML.push(g));this.option.progress.enable&&(g=this.variable.struct._backup.progress_bar=
T._struct.progress_bar,f.innerHTML.push(g))}},{key:"initNode",value:function(){var d=this;T._assistant.object.getMethod(this,T,"initNode").call(this);var f=this.variable.nodes.container;var k=f.querySelector(".modal-layer-toolbar");this.option.layer.toolbar.enable&&Object.keys(this.option.layer.toolbar.config).forEach(function(g,h){h=d.option.layer.toolbar.config[g];if(h.enable){var l;var n=k.querySelector('.modal-layer-toolbar-item[tool-type="'+g+'"]');var p=n.querySelector(".modal-layer-toolbar-item-icon");
n.setAttribute("title",h.title);(l=p.classList).add.apply(l,H(h.icon.split(" ")));h.config instanceof Object&&Object.entries(h.config).forEach(function(v,q){q=v[0];v=v[1];if(v.enable){var r=n.querySelector(".modal-layer-toolbar-item-child-list");q=n.querySelector(".modal-layer-toolbar-"+g+"-icon["+g+'-type="'+q+'"]');r.setAttribute("title",v.title);v.icon&&(q.innerText=v.icon)}})}});this.load().then(function(g){return d.loaded(g)})["catch"](function(){d.variable.image.status=T._ENUM.LOAD_STATUS.FAILED;
var g=f.querySelector(".modal-layer-image-canvas");g.setAttribute("load-status",T._assistant.object.getKeyByValue(T._ENUM.LOAD_STATUS,T._ENUM.LOAD_STATUS.FAILED));d.variable.image.fadeAttr=T._assistant.canvasAnimation.fade({size:72,"char":"!?",canvas:g,sign:"load-failed",speed:[25,20,20,25],family:"Microsoft YaHei",text:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25, \u8bf7\u70b9\u51fb\u91cd\u8bd5.",round:{m:50,lineWidth:5,color:"rgb(230, 230, 230)"}});d.variable.image.link&&d.variable.image.link.startsWith("blob:")&&
URL.revokeObjectURL(d.variable.image.link);d.variable.image.layer&&d.variable.image.layer instanceof Pa&&d.variable.image.layer.remove()})}},{key:"initEvent",value:function(){var d=this;T._assistant.object.getMethod(this,T,"initEvent").call(this);var f=this.variable.nodes.container;var k=T._assistant.object.getKeyByValue(T._ENUM.LOAD_STATUS,T._ENUM.LOAD_STATUS.FAILED);T._assistant.element.eventTarget(f,'.modal-layer-image-canvas[load-status="'+k+'"]',"click",this.reload,this);Object.keys(this.option.event.imageTools).forEach(function(g){d.option.event.imageTools[g]&&
d.option.event.imageTools[g]instanceof Function&&T._assistant.element.eventTarget(f,'.modal-layer-toolbar-item[tool-type="'+g+'"]',"click",d.option.event.imageTools[g],d)})}},{key:"resize",value:function(){var d;var f=this.variable.nodes.container;var k=f.querySelector(".modal-layer-content");var g=k.querySelector(".modal-layer-image-canvas");var h=getComputedStyle(k,null);var l=T._assistant.element.getBeforeElementHeight(k);k=k.offsetTop-l;l+=this.option.content.fullContainer?0:2*k;this.variable.image.status!==
T._ENUM.LOAD_STATUS.LOADING?d=[g.width,g.height]:d=H(this.option.layer.size.min);d[0]+=parseFloat(h.marginLeft)+parseFloat(h.marginRight);d[1]+=l;this.variable.defaultArea=d;f.style.width=d[0]+"px";f.style.height=d[1]+"px";!this.option.drag.overflow&&T._assistant.element.isOverflow(f,this.option.window)&&(f.style.cssText+="margin-top: auto; margin-left: auto")}},{key:"load",value:function(){var d=this;this.variable.nodes.container.querySelector(".modal-layer-image-canvas").setAttribute("load-status",
T._assistant.object.getKeyByValue(T._ENUM.LOAD_STATUS,T._ENUM.LOAD_STATUS.LOADING));this.variable.image.layer=T.loading({mask:!1,popupTime:0,layer:{icon:1,duration:1,color:"deepskyblue"},window:this.variable.nodes.container},function(f){throw f;});this.variable.image.status=T._ENUM.LOAD_STATUS.LOADING;return this.variable.image.finish=new Promise(function(f,k){var g=new Image;d.variable.image.link=T._assistant.file.getImage(d.option.layer.image[d.variable.image.reload++]);g.onload=function(){return f(g)};
g.onerror=k;g.src=d.variable.image.link})}},{key:"reload",value:function(){var d=this;this.variable.nodes.container.querySelector(".modal-layer-image-canvas").setAttribute("load-status",T._assistant.object.getKeyByValue(T._ENUM.LOAD_STATUS,T._ENUM.LOAD_STATUS.LOADING));this.variable.image.status=T._ENUM.LOAD_STATUS.LOADING;return this.variable.image.finish=new Promise(function(f,k){for(var g=new Image;!1===d.variable.image.link&&d.variable.image.reload<d.option.layer.image.length;)d.variable.image.link.startsWith("blob:")&&
URL.revokeObjectURL(d.variable.image.link),d.variable.image.link=T._assistant.file.getImage(d.option.layer.image[d.variable.image.reload++]);g.onload=function(){return f(g)};g.onerror=k;g.src=d.variable.image.link})}},{key:"loaded",value:function(d){var f=this;var k=this.variable.nodes.container;var g=k.querySelector(".modal-layer-image-canvas");k=k.querySelector(".modal-layer-image-hidden");this.variable.image.status=T._ENUM.LOAD_STATUS.LOADED;this.variable.image["default"].size=d.naturalWidth>this.option.layer.size.max[0]||
d.naturalHeight>this.option.layer.size.max[1]?T._assistant.number.getLegalSize([d.naturalWidth,d.naturalHeight],this.option.layer.size.max):[d.naturalWidth,d.naturalHeight];g.width=this.variable.image["default"].size[0];g.height=this.variable.image["default"].size[1];this.variable.image.fadeAttr&&g.setAttribute(this.variable.image.fadeAttr,0);g.setAttribute("load-status",T._assistant.object.getKeyByValue(T._ENUM.LOAD_STATUS,T._ENUM.LOAD_STATUS.LOADED));d.style.cssText="opacity: 0;visibility: hidden;position: relative;z-index: -1;pointer-events: none;";
k.appendChild(d);window.requestAnimationFrame(function(){var h,l;f.variable.image.layer&&f.variable.image.layer instanceof Pa&&f.variable.image.layer.hide();(h=g.getContext("2d")).drawImage.apply(h,[d,0,0,d.width,d.height,0,0].concat(H(f.variable.image["default"].size)));f.variable.image["default"].imageData=(l=g.getContext("2d")).getImageData.apply(l,[0,0].concat(H(f.variable.image["default"].size)))})}},{key:"failed",value:function(){var d=this.variable.nodes.container.querySelector(".modal-layer-image-canvas");
d.setAttribute("load-status",T._assistant.object.getKeyByValue(T._ENUM.LOAD_STATUS,T._ENUM.LOAD_STATUS.FAILED));this.variable.image.status=T._ENUM.LOAD_STATUS.FAILED;T._assistant.canvasAnimation.fade({size:80,"char":"\u00d7",canvas:d,speed:10,family:"Microsoft YaHei",sign:"finally-load-failed",text:"\u56fe\u7247\u52a0\u8f7d\u5931\u8d25, \u8bf7\u8054\u7cfb\u7ba1\u7406\u5458.",round:{m:50,lineWidth:5,y:d.height/2-15,color:"rgb(230, 230, 230)"}});this.variable.image.link&&this.variable.image.link.startsWith("blob:")&&
URL.revokeObjectURL(this.variable.image.link);this.variable.image.layer&&this.variable.image.layer instanceof Pa&&this.variable.image.layer.hide()}},{key:"removeAllEvent",value:function(){var d=this,f=this.variable.nodes.container;T._assistant.object.getMethod(this,T,"removeAllEvent").call(this);f.removeEventListener("click",this.reload);Object.keys(this.option.event.imageTools).forEach(function(k){d.option.event.imageTools[k]&&d.option.event.imageTools[k]instanceof Function&&f.removeEventListener("click",
d.option.event.imageTools[k])})}},{key:"crop",value:function(){var d=this,f,k,g,h,l,n;var p=!0;var v=this.variable.nodes.container.querySelector(".modal-layer-image-canvas");var q=v.width;var r=v.height;var u=v.cloneNode();var t=u.getContext("2d");var z=Math.floor(.1*q);var B=Math.floor(.1*r);var K="display: block; position: fixed; top: 0px; bottom: 0px; left: 0px; right: 0px; visibility: visible; opacity: 1; border: 0px; margin: 0px; z-index: "+T._assistant.element.maxZIndex()+";";u.width=window.innerWidth;
u.height=window.innerHeight;u.style.cssText=K;var w=[(u.width-q)/2,(u.height-r)/2];var x=[0,0,v.width,v.height].concat(H(w),[v.width,v.height]);var J=[w[0],(u.height+r)/2+22];var U=function(){t.save();t.clearRect(0,0,u.width,u.height);t.drawImage.apply(t,[v].concat(H(w)));t.fillStyle="rgba(0, 0, 0, 0.35)";t.fillRect(0,0,u.width,u.height);t.fillStyle="white";t.font="22px serif";t.fillText.apply(t,["\u53cc\u51fb\u9f20\u6807\u5de6\u952e\u6216\u6309\u56de\u8f66\u622a\u53d6, ESC\u9000\u51fa."].concat(H(J)));
t.drawImage.apply(t,[v].concat(H(x)));t.restore();p?f=window.requestAnimationFrame(U):window.cancelAnimationFrame(f)};var R=function(){document.removeEventListener("keyup",ua);u.removeEventListener("mousemove",va);u.removeEventListener("mousedown",wa);u.removeEventListener("mouseup",xa);u.removeEventListener("dbclick",la);p=!1;u.remove()};var la=function(){R();v.width=x[2];v.height=x[3];v.getContext("2d").drawImage(u,x[4],x[5],v.width,v.height,0,0,v.width,v.height);d.resize()};var ua=function(y){switch(y.code){case "Enter":la();
y.preventDefault();break;case "Escape":R(),y.preventDefault()}};var xa=function(){k=!1;g=h=null};var wa=function(y){g=[y.x,y.y];k=l||n?!0:!1;h=[x[4],x[5],x[2],x[3]];g[0]=l?y.x>=x[4]-10&&y.x<=x[4]+10?x[4]:x[2]+x[4]:y.x;g[1]=n?y.y>=x[5]-10&&y.y<=x[5]+10?x[5]:x[3]+x[5]:y.y};var va=function(y){var C;y=null!==(C=y)&&void 0!==C?C:window.event;C=[y.x,y.y];if(k&&1===y.buttons){if(l){y=g[0]-C[0];if(g[0]===h[0]){var E=h[0]-y;var A=h[2]+y;y=h[0]-w[0]-y;A<z?A=z:A>q&&(A=q);E<w[0]?(y=0,E=w[0]):E>w[0]+q-z&&(y=q-
z,E=w[0]+q-z);x[4]=E;x[0]=y}else A=h[2]-y,A<z?A=z:A>q&&(A=q);x[2]=x[6]=A}n&&(C=g[1]-C[1],g[1]===h[1]?(y=h[1]-C,E=h[3]+C,C=h[1]-w[1]-C,E<B?E=B:E>r&&(E=r),y<w[1]?(C=0,y=w[1]):y>w[1]+r-B&&(C=r-B,y=w[1]+r-B),x[5]=y,x[1]=C):(E=h[3]-C,E<B?E=B:E>r&&(E=r)),x[3]=x[7]=E)}else{l=n=!1;A=[x[4],x[5]];y=[[A[0]-5,A[1]-5],[A[0]+x[2]+5,A[1]+5]];var W=[[A[0]-5,A[1]-5],[A[0]+5,A[1]+x[3]+5]];E=[[A[0]+x[2]-5,A[1]-5],[A[0]+x[2]+5,A[1]+x[3]+5]];A=[[A[0]-5,A[1]+x[3]-5],[A[0]+x[2]+5,A[1]+x[3]+5]];y=T._assistant.number.insideRect(C,
y);W=T._assistant.number.insideRect(C,W);E=T._assistant.number.insideRect(C,E);C=T._assistant.number.insideRect(C,A);W&&y||E&&C?(l=n=!0,u.style.cssText+="cursor: nwse-resize"):E&&y||W&&C?(l=n=!0,u.style.cssText+="cursor: nesw-resize"):W||E?(l=!0,n=!1,u.style.cssText+="cursor: ew-resize"):y||C?(n=!0,l=!1,u.style.cssText+="cursor: ns-resize"):(l=n=!1,u.style.cssText+="cursor: default")}};U();document.addEventListener("keyup",ua);u.addEventListener("mousemove",va);u.addEventListener("mousedown",wa);
u.addEventListener("mouseup",xa);u.addEventListener("dblclick",la);document.body.appendChild(u)}},{key:"spin",value:function(){var d=this,f,k,g,h;var l=this.variable.nodes.container.querySelector(".modal-layer-image-canvas");var n=l.getContext("2d");var p=this.variable.image.spin.backup;p||(p=new OffscreenCanvas(l.width,l.height),p.getContext("2d").drawImage(l,0,0),this.variable.image.spin.backup=p);this.variable.image.finish.then(function(v){d.variable.image.spin.total+=d.variable.image.spin.angle;
k=d.variable.image.spin.total%360*Math.PI/180;v.style.transform="rotate("+d.variable.image.spin.total+"deg)";f=v.getBoundingClientRect();v.style.transform="";d.option.layer.size.max[0]>=f.width&&d.option.layer.size.max[1]>=f.height?g=[f.width,f.height]:g=T._assistant.number.getLegalSize([f.width,f.height],d.option.layer.size.max);l.width=g[0];l.height=g[1];d.variable.image.spin.total%=360;h=[-l.width/2,-l.height/2];0!=d.variable.image.spin.total%180&&(g=[g[1],g[0]],h=[-l.height/2,-l.width/2]);d.variable.image.spin.total%=
360;n.save();n.translate(l.width/2,l.height/2);n.rotate(k);n.drawImage.apply(n,[p,0,0,p.width,p.height].concat(H(h),H(g)));n.restore();d.resize()})}},{key:"filter",value:function(d){var f,k;var g=this.variable.nodes.container.querySelector(".modal-layer-image-canvas");if(0!=g.getAttribute("load-status")){var h=g.getContext("2d");var l=d.getAttribute("filter-type");null===(f=(k={blur:function(){var n,p;var v=null!==(n=Number(d.getAttribute("data-sigma")))&&void 0!==n?n:1;n=null!==(p=Number(d.getAttribute("data-radius")))&&
void 0!==p?p:3;p=T._assistant.canvasFilter.gaussianBlur(h.getImageData(0,0,g.width,g.height),n,v);h.putImageData(p,0,0)},gray:function(){var n=T._assistant.canvasFilter.grayscale(h.getImageData(0,0,g.width,g.height));h.putImageData(n,0,0)},mirror:function(){var n=T._assistant.canvasFilter.mirror(h.getImageData(0,0,g.width,g.height),0);h.putImageData(n,0,0)}})[l])||void 0===f?void 0:f.call(k)}}},{key:"revert",value:function(){var d=this;var f=this.variable.nodes.container.querySelector(".modal-layer-image-canvas");
var k=f.getContext("2d");this.variable.image.finish.then(function(){d.variable.image.spin.total=0;f.width=d.variable.image["default"].size[0];f.height=d.variable.image["default"].size[1];k.putImageData(d.variable.image["default"].imageData,0,0);d.resize()})}},{key:"download",value:function(){T._assistant.canvas.download(this.variable.nodes.container.querySelector(".modal-layer-image-canvas"),this.option.title,"image/png")}}]);return b}(T);Object.defineProperty(T._achieve,"image",{value:Qa});
var Ra=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initStruct",value:function(){T._assistant.object.getMethod(this,Z,"initStruct").call(this);this.variable.struct._backup.interaction.innerHTML.push(this.variable.struct._backup.interaction_button.cancel)}}]);return b}(Z);Object.defineProperty(T._achieve,"prompt",{value:Ra});
var Sa=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initStruct",value:function(){T._assistant.object.getMethod(this,Z,"initStruct").call(this);this.variable.struct._backup.interaction.innerHTML.push(this.variable.struct._backup.interaction_button.no)}}]);return b}(Z);Object.defineProperty(T._achieve,"confirm",{value:Sa});
var Pa=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initOption",value:function(d){T._assistant.object.getMethod(this,T,"initOption").call(this,d);this.option.layer=T._assistant.object.merge(this.option.layer,Aa);this.option.title=!1;this.option.drag.enable=!1;this.option.resize.enable=!1;this.option.progress.enable=!1}},{key:"compatibleOption",value:function(d){var f={center:"center",right:"flex-end",left:"flex-start"};T._assistant.object.getMethod(this,
T,"compatibleOption").call(this,d);if(!T._assistant.object.isEmpty(d.layer.position)){Array.isArray(d.layer.position)||(d.layer.position=[d.layer.position,d.layer.position]);for(var k=0;2>k;k++)d.layer.position[k]=f[d.layer.position[k]]}}},{key:"checkOption",value:function(){T._assistant.object.getMethod(this,T,"checkOption").call(this);if(!Array.isArray(this.option.layer.position)&&!["left","center","right"].includes(this.option.layer.position))throw Error("layer.position does not meet expectations");
}},{key:"initStruct",value:function(){T._assistant.object.getMethod(this,T,"initStruct").call(this);var d=this.variable.struct._build.container;var f=this.variable.struct._backup.content=T._struct.content;var k=this.variable.struct._backup.content_loading=T._struct.content_loading;var g=this.variable.struct._backup.content_loading_icon=T._struct.content_loading_icon;window.isNaN(Number(this.option.layer.icon))?k.innerHTML[0]["class"]+=" "+this.option.layer.icon:k.innerHTML[0]=g[this.option.layer.icon];
f.innerHTML.push(k);d.innerHTML.push(f)}},{key:"initNodeFinally",value:function(){T._assistant.object.getMethod(this,T,"initNodeFinally").call(this);var d=this.variable.nodes.container;var f=d.querySelector(".modal-layer-content");var k=f.querySelector(".modal-layer-loading-icon");var g=f.querySelector(".modal-layer-loading-box");d.style.cssText+="background: transparent; box-shadow: none;";f.style.cssText+="background: "+this.option.layer.background;g.style.cssText="justify-content: "+this.option.layer.position[0]+
"; align-items: "+this.option.layer.position[1];k.style.cssText+="font-size: "+this.option.layer.size+"px; width: "+this.option.layer.area[0]+"px; height: "+this.option.layer.area[1]+"px; color: "+this.option.layer.color+"; animation-duration: "+this.option.layer.duration+"s;";T._assistant.object.isEmpty(this.option.layer.rate)||(k.style.animationTimingFunction=this.option.layer.rate)}}]);return b}(T);Object.defineProperty(T._achieve,"loading",{value:Pa});
var Ta=function(e){function b(){O(this,b);return c.apply(this,arguments)}I(b,e);var c=L(b);P(b,[{key:"initOption",value:function(d){T._assistant.object.getMethod(this,T,"initOption").call(this,d);this.option.title=!1;this.option.drag.enable=!1;this.option.drag.overflow=!1}},{key:"initStruct",value:function(){T._assistant.object.getMethod(this,T,"initStruct").call(this);var d=this.variable.struct._build.container;var f=this.variable.struct._backup.content=T._struct.content;d.innerHTML.push(f);this.option.resize.enable&&
(f=this.variable.struct._backup.resize_box=T._struct.resize_box,d.innerHTML.push(f));this.option.progress.enable&&(f=this.variable.struct._backup.progress_bar=T._struct.progress_bar,d.innerHTML.push(f))}},{key:"initNode",value:function(){T._assistant.object.getMethod(this,T,"initNode").call(this);var d=this.variable.nodes.container.querySelector(".modal-layer-content");if(this.option.content.value instanceof Object){var f=T._assistant.element.objectToNode(this.option.content.value);Object.keys(f).forEach(function(k){d.appendChild(f[k])})}else d.innerHTML=
this.option.content.value}}]);return b}(T);Object.defineProperty(T._achieve,"msg",{value:Ta});Object.defineProperty(T._achieve,"message",{value:Ta});}(window);
